## 修复Dify API调用400错误的计划

### 问题分析
当前调用Dify API的`/workflows/run`端点时返回400错误，这表示请求格式不正确。可能的原因包括：
1. 缺少必填字段
2. 请求体结构错误
3. 字段名称不正确
4. 缺少详细的错误日志

### 解决方案

#### 1. 添加详细的错误日志记录
- 修改`sendToDifyWorkflow`函数，添加try-catch块
- 记录完整的错误响应，包括Dify API返回的详细错误信息
- 这样可以明确知道400错误的具体原因

#### 2. 检查并修复请求格式
- 确保请求体包含所有必填字段：`inputs`、`response_mode`、`user`和`app_id`
- 验证`inputs`对象的结构是否符合Dify API要求
- 确保字段名称与Dify API文档一致

#### 3. 验证API密钥和应用ID
- 确保`DIFY_API_KEY`和`DIFY_APP_ID`环境变量正确配置
- 检查API密钥是否有效
- 验证应用ID是否与Dify平台上的应用匹配

### 实施步骤

1. **修改`sendToDifyWorkflow`函数**：
   - 添加try-catch块，捕获并记录详细错误信息
   - 确保请求体包含所有必填字段
   - 验证请求格式

2. **测试API调用**：
   - 重启后端服务器
   - 测试翻译功能
   - 查看详细错误日志

3. **根据错误日志调整请求格式**：
   - 根据Dify API返回的具体错误信息，调整请求体结构
   - 确保所有必填字段都正确填写

### 预期结果
- API调用成功，不再返回400错误
- 能够获取到针对输入文本的真实分析结果
- 详细的错误日志可以帮助调试后续问题