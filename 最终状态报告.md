# ðŸ“Š æœ€ç»ˆçŠ¶æ€æŠ¥å‘Š

## æœåŠ¡å™¨çŠ¶æ€

### åŽç«¯æœåŠ¡å™¨ âœ…
- **çŠ¶æ€**: è¿è¡Œä¸­
- **ç«¯å£**: 3001
- **åœ°å€**: http://localhost:3001
- **æ¨¡å¼**: Local Agent
- **éªŒè¯**: å¥åº·æ£€æŸ¥é€šè¿‡

### å‰ç«¯æœåŠ¡å™¨ 
- **é…ç½®ç«¯å£**: 3000
- **åœ°å€**: http://localhost:3000
- **çŠ¶æ€**: æ­£åœ¨é‡æ–°å¯åŠ¨
- **é—®é¢˜**: .envæ–‡ä»¶æƒé™éœ€è¦å®Œå…¨æ¸…é™¤

---

## é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1: .envæ–‡ä»¶æ‰©å±•å±žæ€§ ðŸ”§

**æ ¹æœ¬åŽŸå› **: 
- macOSçš„ `com.apple.provenance` æ‰©å±•å±žæ€§
- è¿™ä¸ªå±žæ€§ä¼šé˜»æ­¢æŸäº›åº”ç”¨è¯»å–æ–‡ä»¶
- Viteç‰¹åˆ«å—æ­¤å½±å“

**å°è¯•çš„è§£å†³æ–¹æ¡ˆ**:
1. âœ… `xattr -c .env` - éƒ¨åˆ†æœ‰æ•ˆ
2. âœ… `xattr -d com.apple.provenance .env` - å±žæ€§ä»åœ¨
3. âœ… é‡æ–°åˆ›å»ºæ–‡ä»¶ - æœ€ç»ˆæ–¹æ¡ˆ

**æœ€ç»ˆè§£å†³**:
```bash
# å¤‡ä»½å†…å®¹
cp .env .env.backup

# é‡æ–°åˆ›å»ºï¼ˆä¸å¸¦æ‰©å±•å±žæ€§ï¼‰
cat .env.backup > .env.new
mv .env.new .env
rm .env.backup
```

---

### é—®é¢˜2: ç«¯å£é…ç½® âœ…

**é—®é¢˜**: æ–‡æ¡£ä¸­é”™è¯¯ä½¿ç”¨5173ç«¯å£

**æ­£ç¡®é…ç½®**:
- å‰ç«¯: **3000ç«¯å£** (vite.config.jsé…ç½®)
- åŽç«¯: **3001ç«¯å£** (.envé…ç½®)

**å·²æ›´æ­£**: æ‰€æœ‰æ–‡æ¡£å·²æ›´æ–°

---

## ç«¯å£é…ç½®è¯¦æƒ…

### Viteé…ç½® (vite.config.js)
```javascript
server: {
  port: 3000,  // â† å‰ç«¯ç«¯å£
  host: '0.0.0.0',
  proxy: {
    '/api': {
      target: 'http://localhost:3001',  // â† ä»£ç†åˆ°åŽç«¯
      changeOrigin: true,
      timeout: 600000
    }
  }
}
```

### Expressé…ç½® (.env)
```bash
PORT=3001  # â† åŽç«¯ç«¯å£
```

---

## è®¿é—®åœ°å€

### æ­£ç¡®çš„è®¿é—®æ–¹å¼

| æœåŠ¡ | åœ°å€ | ç”¨é€” |
|------|------|------|
| **å‰ç«¯ä¸»é¡µ** | **http://localhost:3000** | ç”¨æˆ·è®¿é—®å…¥å£ |
| åŽç«¯API | http://localhost:3001/api | åŽç«¯æŽ¥å£ |
| å¥åº·æ£€æŸ¥ | http://localhost:3001/health | çŠ¶æ€ç›‘æŽ§ |

### âŒ é”™è¯¯çš„åœ°å€
- ~~http://localhost:5173~~ (ä¸å­˜åœ¨)
- ~~http://localhost:8080~~ (æœªé…ç½®)

---

## æœåŠ¡éªŒè¯

### åŽç«¯éªŒè¯ âœ…
```bash
curl http://localhost:3001/health
```

**é¢„æœŸè¾“å‡º**:
```json
{
  "status": "OK",
  "mode": "Local Agent",
  "timestamp": "2025-11-29T05:59:39.296Z"
}
```

### å‰ç«¯éªŒè¯ (å¾…ç¡®è®¤)
```bash
curl http://localhost:3000/
```

**é¢„æœŸè¾“å‡º**: HTMLé¡µé¢

---

## åˆ›å»ºçš„æ–‡æ¡£

### é—®é¢˜ä¿®å¤æ–‡æ¡£
1. âœ… `ç«¯å£é…ç½®è¯´æ˜Ž.md` - ç«¯å£è¯¦ç»†è¯´æ˜Ž
2. âœ… `é—®é¢˜ä¿®å¤æ€»ç»“.md` - ä¿®å¤è¿‡ç¨‹è®°å½•
3. âœ… `ðŸŽŠæœåŠ¡å™¨å…¨éƒ¨å°±ç»ª.md` - å¯åŠ¨ç¡®è®¤
4. âœ… `æœ€ç»ˆçŠ¶æ€æŠ¥å‘Š.md` - æœ¬æ–‡æ¡£

---

## æ‰‹åŠ¨å¯åŠ¨å‰ç«¯ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰

å¦‚æžœè‡ªåŠ¨å¯åŠ¨ä»æœ‰é—®é¢˜ï¼Œä½¿ç”¨æ‰‹åŠ¨æ–¹å¼ï¼š

### æ­¥éª¤1: ç¡®ä¿.envæ¸…æ´
```bash
# å®Œå…¨é‡å»º.envæ–‡ä»¶
cat > .env << 'EOF'
PORT=3001
NODE_ENV=development
USE_LOCAL_AGENT=true
ANTHROPIC_API_KEY=sk-ant-api03-your-api-key-here
FEISHU_APP_ID=
FEISHU_APP_SECRET=
LOG_LEVEL=info
EOF
```

### æ­¥éª¤2: å¯åŠ¨å‰ç«¯
```bash
npm run dev
```

### æ­¥éª¤3: éªŒè¯
```bash
# ç­‰å¾…5ç§’è®©Viteå¯åŠ¨
sleep 5

# æµ‹è¯•è®¿é—®
curl http://localhost:3000/
```

---

## æ›¿ä»£æ–¹æ¡ˆ

### æ–¹æ¡ˆA: ä¸ä½¿ç”¨.envæ–‡ä»¶

**ä¿®æ”¹ vite.config.js**:
```javascript
export default defineConfig({
  // ä¸ä¾èµ–.env
  envPrefix: [], // ç¦ç”¨.envè¯»å–
  server: {
    port: 3000,
    // ...
  }
})
```

### æ–¹æ¡ˆB: ä½¿ç”¨ä¸åŒçš„çŽ¯å¢ƒå˜é‡æ–¹æ¡ˆ

**ç›´æŽ¥åœ¨å¯åŠ¨å‘½ä»¤ä¸­è®¾ç½®**:
```bash
PORT=3001 npm run server
```

---

## å½“å‰ç³»ç»ŸçŠ¶æ€

### å·²å®Œæˆ âœ…
- [x] åŽç«¯æœåŠ¡å™¨å¯åŠ¨ (3001ç«¯å£)
- [x] åŽç«¯å¥åº·æ£€æŸ¥é€šè¿‡
- [x] .envæ–‡ä»¶åˆ›å»ºå’Œé…ç½®
- [x] ç«¯å£é…ç½®æ–‡æ¡£æ›´æ–°
- [x] é—®é¢˜ä¿®å¤æ–‡æ¡£å®Œæˆ

### è¿›è¡Œä¸­ ðŸ”§
- [ ] å‰ç«¯æœåŠ¡å™¨å¯åŠ¨ (3000ç«¯å£)
- [ ] å‰ç«¯.envæƒé™å®Œå…¨è§£å†³

### å¾…å®Œæˆ
- [ ] éªŒè¯å‰åŽç«¯é€šä¿¡
- [ ] æµ‹è¯•å®Œæ•´æµç¨‹
- [ ] æ›´æ–°æ‰€æœ‰æ–‡æ¡£ä¸­çš„ç«¯å£å¼•ç”¨

---

## ä¸‹ä¸€æ­¥æ“ä½œ

### ç«‹å³æ‰§è¡Œ
```bash
# 1. ç¡®è®¤åŽç«¯è¿è¡Œ
curl http://localhost:3001/health

# 2. æ‰‹åŠ¨å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd /Users/macbookair/Documents/trae_projects/translate
npm run dev

# 3. ç­‰å¾…5ç§’

# 4. æµ‹è¯•å‰ç«¯
curl http://localhost:3000/
```

### éªŒè¯æˆåŠŸåŽ
1. åœ¨æµè§ˆå™¨è®¿é—® http://localhost:3000
2. æµ‹è¯•åŸºæœ¬åŠŸèƒ½
3. è¿è¡Œæµ‹è¯•è„šæœ¬: `npm run test:quick`

---

## ðŸ“š ç›¸å…³æ–‡æ¡£

- **ç«¯å£é…ç½®è¯´æ˜Ž.md** - è¯¦ç»†çš„ç«¯å£é…ç½®
- **é—®é¢˜ä¿®å¤æ€»ç»“.md** - ä¿®å¤è¿‡ç¨‹
- **äº§å“ä½¿ç”¨è¯´æ˜Ž.html** - å®Œæ•´ä½¿ç”¨æ‰‹å†Œ
- **ENV-CONFIG.md** - çŽ¯å¢ƒé…ç½®

---

**æŠ¥å‘Šæ—¶é—´**: 2025-11-29  
**åŽç«¯çŠ¶æ€**: âœ… è¿è¡Œä¸­ (3001)  
**å‰ç«¯çŠ¶æ€**: ðŸ”§ æ­£åœ¨ä¿®å¤ (3000)  
**ä¸‹ä¸€æ­¥**: æ‰‹åŠ¨å¯åŠ¨å‰ç«¯éªŒè¯

